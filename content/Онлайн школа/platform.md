---
date: 2024-10-10
tags:
  - Онлайн-школа
---
Модуль предназначен для работы с платформами Онлайн школы.

## PlatformController

В контроллере применяются следующие проверки

- ThrottlerGuard - ограничивает количество запросов от пользователя
- JWTGuard - проверят на валидность токен для доступа к методам
- SuperAdminRoleGuard - проверяет что у пользователя есть роль супер администратора

### Endpoints

Контроллер предоставляет следующие эндпоинты:

| Метод  | URL                        | Описание                       |
| ------ | -------------------------- | ------------------------------ |
| GET    | `platform/`     | Получение списка всех платформ |
| GET    | `platform/:id/` | Получение платформы по ID      |
| POST   | `platform/`     | Создание новой платформы       |
| PUT    | `platform/:id/` | Обновление данных платформы    |
| DELETE | `platform/:id/` | Удаление платформы             |

### Получение списка всех платформ

`GET platform/`

*Входные данные:* Отсутствуют

*Функционал:*

Выполняет поиск в базе данных всех платформ.

*Выходные данные:* Status: `200 OK`

```json
{
  id: string;
  createdAt: Date;
  name: string;
  ownerEmail: string;
}
```

### Получение платформы по ID

`GET platform/`

*Входные данные:*

- В URL запроса должен быть передан ID платформы

*Функционал:*

Выполняет поиск в базе данных платформы в соответствии с переданным ID. Если платформа с таким идентификатором не найдена, выбрасывает исключение NotFoundException с сообщением об ошибке "Платформа не найдена".

*Выходные данные:* Status: `200 OK`

```json
{
  id: string;
  createdAt: Date;
  name: string;
  ownerEmail: string;
}
```

### Создание новой платформы

`POST platform/`

*Входные данные:*

- В тело запроса должны быть переданы следующие параметры:

| Параметр     | Тип данных | Валидация                    | Описание                          |
| ------------ | ---------- | ---------------------------- | --------------------------------- |
| name         | string     | Обязательный                 | Название                          |
| ownerEmail   | string     | Обязательный                 | Адрес электронной почты владельца |
| subscription | string     | Опциональный, в формате UUID | Подписка                          |

*Функционал:*

Создает новый экземпляр платформы в базе данных, в соответствии с параметрами, переданными в запросе. В случае ошибки выбрасывает исключение BadRequestException с сообщением "Что-то пошло не так" и информацией об ошибке.

*Выходные данные:* Status: `201 Created`

```json
{
  id: string;
  createdAt: Date;
  name: string;
  ownerEmail: string;
}
```

### Обновление данных платформы

`PUT platform/:id/`

*Входные данные:*

- В URL запроса должен быть передан ID платформы
- В тело запроса должны быть переданы следующие параметры:

| Параметр   | Тип данных | Валидация    | Описание                          |
| ---------- | ---------- | ------------ | --------------------------------- |
| name       | string     | Обязательный | Название                          |
| ownerEmail | string     | Обязательный | Адрес электронной почты владельца |

*Функционал:*

Выполняет в базе данных поиск платформы, в соответствии с переданным ID. Если платформа не найдена, выбрасывает исключение NotFoundException с сообщением об ошибке "Платформа не найдена".

Выполняет сохранение переданных параметров для указанной платформы в базе данных, в случае ошибки выбрасывает исключение BadRequestException с сообщением "Что-то пошло не так" и информацией об ошибке.

*Выходные данные:* Status: `200 OK`

```json
{
  id: string;
  createdAt: Date;
  name: string;
  ownerEmail: string;
}
```

### Удаление платформы

`DELETE platform/:id/`

*Входные данные:*

- В URL запроса должен быть передан ID платформы

*Функционал:*

Выполняет в базе данных поиск платформы, в соответствии с переданным ID. Если платформа не найдена, выбрасывает исключение NotFoundException с сообщением об ошибке "Платформа не найдена".

Выполняет удаление указанной платформы в базе данных, в случае ошибки выбрасывает исключение BadRequestException с сообщением "Что-то пошло не так" и информацией об ошибке.

*Выходные данные:* Status: `200 OK`

```json
{
  id: string;
  createdAt: Date;
  name: string;
  ownerEmail: string;
}
```